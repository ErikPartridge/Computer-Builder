<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico?v=2" />
    <script src="/lib/jquery/dist/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Maitree" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway|Trirong" rel="stylesheet">
    <title>Artisanal AI PCs</title>
    <link href="/lib/semantic/dist/semantic.min.css" rel="stylesheet" type="text/css"/>
    <script src="/lib/semantic/dist/semantic.min.js"></script>
    <link href="/style.css" rel="stylesheet" type="text/css"/>
    <script src="/lib/humanize-plus/dist/humanize.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/vue/1.0.25/vue.min.js"></script>
    <title>We're Thinking</title>
</head>
<body>
    <div class="ui container" id="app">
        <div class="ui stackable grid">
            <div class="ui row centered">
                <div class="eight wide column center aligned">
                    <h1>The Best Match For You</h1>
                    <p class="small italic">
                    While the AI makes an effort to select only compatible parts, you should always verify that all parts are compatible with each other, and that the PSU provides sufficient power. Cases are currently not suggested or factored into the price.</p>
                    <h2 v-if="done">${{price.toFixed(2)}}</h2>
                </div>
            </div>
            <div v-if="done" class="ui row">
                <div class="nine wide column centered">
                    <table style="width: 100%;" class="ui very basic collapsing celled table">
                        <tbody>
                        <tr><td>CPU</td><td>{{cpu.name}}</td><td><a class="redurl" href="{{cpu.url}}">${{cpu.low}}</a> - {{cpu.source}}</td></tr>
                        <tr><td>GPU</td><td>{{gpu.name}}</td><td><a class="redurl" href="{{gpu.url}}">${{gpu.low}}</a> - {{gpu.source}}</td></tr>
                        <tr><td>Boot Drive</td><td>{{boot.name}}</td><td><a class="redurl" href="{{boot.url}}">${{boot.low}}</a> - {{boot.source}}</td></tr>
                        <tr v-if="secondaryDrive"><td>Secondary Drive</td><td>{{secondary.name}}</td><td><a class="redurl" href="{{secondary.url}}">${{secondary.low}}</a> - {{secondary.source}}</td></tr>
                        <tr><td>Motherboard</td><td>{{motherboard.name}}</td><td><a class="redurl" href="{{motherboard.url}}">${{motherboard.low}}</a> - {{motherboard.source}} </td></tr>
                        <tr><td>Ram</td><td>{{ram.name}}</td><td><a class="redurl" href="{{ram.url}}">${{ram.low}}</a> - {{ram.source}}</td></tr>
                        <tr><td>PSU</td><td>{{psu.name}}</td><td><a class="redurl" href="{{psu.url}}">${{psu.low}}</a> - {{psu.source}}</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div v-if="done" class="ui row">
                <div class="four wide column centered">
                    <span><a class="redurl" href="/terms">Terms &amp; Privacy</a> &bull; <a href="/" class="redurl">Back</a> </span>
                </div>
            </div>
            <div v-if="done" class="ui row">
                <div class="three wide column centered">
                    <span>&copy; Erik Partridge, 2016</span>
                </div>
            </div>
        </div>
        <div v-if="!done" class="sk-folding-cube">
            <div class="sk-cube1 sk-cube"></div>
            <div class="sk-cube2 sk-cube"></div>
            <div class="sk-cube4 sk-cube"></div>
            <div class="sk-cube3 sk-cube"></div>
        </div>
    </div>
<script type="application/javascript">
    var v = new Vue({
        el: '#app',
        data : {
            done : false,
            result : {}
        }
    });
    function update(){
        $.ajax({
            type:"get",
            url:"/api/" + window.location.pathname.split("/c")[1],
            datatype:"json",
            success:function(data)
            {
                if(!data['done']){
                    setTimeout( update(), 500);
                }else{
                    console.log("Done processing data");
                    v.$data = data;
                    v['done'] = true;
                }
            },
            error:function(err){
                console.log(err);
            }
        });
    }
    update();
</script>
</body>
</html>